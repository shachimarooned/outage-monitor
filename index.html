<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Cloud-Service Outage Monitor</title>
  <style>
    body{font-family:system-ui,Arial,sans-serif;background:#f6f8fa;margin:0;padding:2rem;line-height:1.4}
    h1{margin-top:0}
    .card{background:#fff;border:1px solid #d0d7de;border-radius:8px;padding:1rem;margin-bottom:1rem;box-shadow:0 1px 3px rgba(0,0,0,.05)}
    .card h2{margin:0 0 .25rem;font-size:1.1rem}
    .card time{color:#61676d;font-size:.85rem}
    .error{color:#d73a49;font-size:.9rem}
  </style>
</head>
<body>
<h1>Cloud&nbsp;Outage&nbsp;Monitor</h1>
<div id="feed-container"></div>

<!-- rss-parser (browser build) -->
<script src="https://cdn.jsdelivr.net/npm/rss-parser@3/dist/rss-parser.browser.min.js"></script>
<script type="module">
  // 1 – configure any feeds you want to track
  const feeds = {
    'OpenAI'      : 'https://status.openai.com/feed.rss',
    'AWS'         : 'https://status.aws.amazon.com/rss/health.rss',
    'Azure'       : 'https://rssfeed.azure.status.microsoft',
    'Google Cloud': 'https://status.cloud.google.com/en/feed.atom',
    'Slack'       : 'https://slack-status.com/feed/rss',
    'GitHub'      : 'https://www.githubstatus.com/history.rss',
    'Cloudflare'  : 'https://www.cloudflarestatus.com/history.rss'
  };

  // 2 – helper to bypass CORS (AllOrigins)
  const proxify = url => `https://api.allorigins.win/raw?url=${encodeURIComponent(url)}`;

  const parser = new RSSParser();
  const container = document.getElementById('feed-container');

  // 3 – fetch feeds in parallel
  (async () => {
    for (const [name, url] of Object.entries(feeds)) {
      const card = document.createElement('section');
      card.className = 'card';
      card.innerHTML = `<h2>${name}</h2><p>Loading…</p>`;
      container.appendChild(card);

      try {
        const feed = await parser.parseURL(proxify(url));
        const item  = feed.items?.[0];
        if (!item) throw new Error('No items found');
        card.innerHTML =
          `<h2>${name}</h2>
           <p><strong>${item.title}</strong></p>
           <time datetime="${item.isoDate || item.pubDate}">${new Date(item.isoDate || item.pubDate).toLocaleString()}</time><br>
           <a href="${item.link}" target="_blank" rel="noopener">Full details →</a>`;
      } catch (err) {
        card.querySelector('p').outerHTML = `<p class="error">Couldn’t load feed<br><code>${err.message}</code></p>`;
        console.error(`${name} feed error:`, err);
      }
    }
  })();
</script>
</body>
</html>
